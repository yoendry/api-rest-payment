{% extends 'base.html.twig' %}

{% block body %}
<div class="container">
    {{ form_start(search_form) }}
	<div class="row">
		<div class="col-sm-4">			
			<div class="form-group">
			    {{ form_label(search_form.company) }}
			    {{ form_errors(search_form.company) }}
			    {{ form_widget(search_form.company, { 'attr': {'class': 'form-control selectpicker'} }) }}
			</div>
		</div>
		<div class="col-sm-4">			
			<div class="form-group">
			    {{ form_label(search_form.paymentMethod) }}
			    {{ form_errors(search_form.paymentMethod) }}
			    {{ form_widget(search_form.paymentMethod, { 'attr': {'class': 'form-control selectpicker'} }) }}
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-sm-4">			
			<div class="form-group">
			    {{ form_label(search_form.date_desde) }}
			    {{ form_errors(search_form.date_desde) }}
			    {{ form_widget(search_form.date_desde, { 'attr': {'class': 'form-control','placeholder': 'yyyy-mm-dd'} }) }}
			</div>
		</div>
		<div class="col-sm-4">			
			<div class="form-group">
			    {{ form_label(search_form.date_hasta) }}
			    {{ form_errors(search_form.date_hasta) }}
			    {{ form_widget(search_form.date_hasta, { 'attr': {'class': 'form-control','placeholder': 'yyyy-mm-dd'} }) }}
			</div>
		</div>
	</div>
        <input type="submit" value="Buscar" class="btn btn-success" />
    {{ form_end(search_form) }}

	{% if payments|length>0 %}
		<div class="row">
		    <table class="table">
		        <thead>
		            <tr>
		                <th>Id</th>
		                <th>Fecha de pago</th>
		                <th>Compañía</th>
		                <th>Monto</th>
		                <th>Método de Pago</th>
		                <th>Referencia Externa</th>
		                <th>Terminal</th>
		                <th>Estado</th>
		                <th>Referencia</th>
		            </tr>
		        </thead>
		        <tbody>
			        {% for payment in payments %}
			            <tr>
			                <td>{{ payment['id'] }}</td>
			                <td>{% if payment['payment_date'] %}{{ payment['payment_date']|date('d/m/Y') }}{% endif %}</td>
			                <td>{{ payment['company'] }}</td>
			                <td>{{ payment['amount'] }}</td>
			                <td>{{ payment['payment_method'] }}</td>
			                <td>{{ payment['external_reference'] }}</td>
			                <td>{{ payment['terminal'] }}</td>
			                <td>{{ payment['status'] }}</td>
			                <td>{{ payment['reference'] }}</td>
			            </tr>
			        {% endfor %}
		        </tbody>
		    </table>
		</div>
  	{% endif %}
</div>
{% endblock %}
