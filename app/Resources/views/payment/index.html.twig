{% extends 'base.html.twig' %}

{% block body %}
<div class="container">
    <h1>Lista de Pagos</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Fecha de pago</th>
                <th>Compañía</th>
                <th>Monto</th>
                <th>Método de Pago</th>
                <th>Referencia Externa</th>
                <th>Terminal</th>
                <th>Estado</th>
                <th>Referencia</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
        {% for payment in payments %}
            <tr>
                <td>{{ payment['id'] }}</td>
                <td>{% if payment['payment_date'] %}{{ payment['payment_date']|date('d/m/Y') }}{% endif %}</td>
                <td>{{ payment['company'] }}</td>
                <td>{{ payment['amount'] }}</td>
                <td>{{ payment['payment_method'] }}</td>
                <td>{{ payment['external_reference'] }}</td>
                <td>{{ payment['terminal'] }}</td>
                <td>{{ payment['status'] }}</td>
                <td>{{ payment['reference'] }}</td>
                <td>
                    <ul>
	                <li>
	                    <a href="{{ path('payment_show', { 'id': payment['id'] }) }}">Ver</a>
	                </li>
			{% if is_granted('ROLE_ADMIN') %}
		                <li>
		                    <a href="{{ path('payment_update_status', { 'id': payment['id'] }) }}">Actualizar Estado</a>
		                </li>
				<li>
		                    <a href="{{ path('payment_delete', { 'id': payment['id'] }) }}">Eliminar</a>
		                </li>
			{% endif %}
                    </ul>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
